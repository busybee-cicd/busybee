{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":";;AAAA,2BAAuB;AACvB,+CAAsC;AACtC,2BAA6B;AAC7B,+CAA8C;AAE9C,IAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,yBAAyB,CAAC,CAAC;AAChE,IAAM,MAAM,GAAG,IAAI,eAAM,CAAC,EAAE,EAAE,EAAC,WAAW,EAAG,EAAC,IAAI,EAAE,IAAI,EAAC,EAAC,CAAC,CAAC;AAG5D,aAAI,CAAC,mBAAmB,EAAE,UAAC,CAAC;IAC1B,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;QACjC,IAAI,QAAQ,GAAG,KAAK,CAAC;QACrB,IAAM,OAAO,GAAG,qBAAK,CAAC,OAAO,EAAE,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,mBAAmB,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;QAEhG,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,UAAC,IAAI;YAC7B,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;YAE7B,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACd,QAAQ,GAAG,IAAI,CAAC;gBAChB,CAAC,CAAC,IAAI,EAAE,CAAC;gBACT,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBACvB,OAAO,EAAE,CAAC;YACZ,CAAC;QACH,CAAC,CAAC,CAAC;QAEH,OAAO,CAAC,EAAE,CAAC,OAAO,EAAE;YAClB,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACd,QAAQ,GAAG,IAAI,CAAC;gBAChB,CAAC,CAAC,IAAI,EAAE,CAAC;gBACT,OAAO,EAAE,CAAC;YACZ,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAA;AACJ,CAAC,CAAC,CAAC","sourcesContent":["import test from 'ava';\r\nimport { spawn } from 'child_process';\r\nimport * as path from 'path';\r\nimport { Logger } from '../../src/lib/Logger';\r\n\r\nconst busybee = path.join(__dirname, '../../dist/src/index.js');\r\nconst logger = new Logger({}, {constructor : {name: 'IT'}});\r\n\r\n\r\ntest(`happy path simple`, (t) => {\r\n  return new Promise((resolve, reject) => {\r\n    let returned = false;\r\n    const testCmd = spawn(busybee, ['test', '-d', path.join(__dirname, 'happy-path-simple'), '-D']);\r\n\r\n    testCmd.stderr.on('data', (data) => {\r\n      logger.info(data.toString());\r\n\r\n      if (!returned) {\r\n        returned = true;\r\n        t.fail();\r\n        testCmd.kill('SIGHUP');\r\n        resolve();\r\n      }\r\n    });\r\n\r\n    testCmd.on('close', () => {\r\n      if (!returned) {\r\n        returned = true;\r\n        t.pass();\r\n        resolve();\r\n      }\r\n    });\r\n  })\r\n});\r\n"]}